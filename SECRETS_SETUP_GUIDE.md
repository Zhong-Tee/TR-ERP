# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Secrets ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Edge Functions

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `SUPABASE_URL` ‡πÄ‡∏õ‡πá‡∏ô secret:
```
Env name cannot start with SUPABASE_, skipping: SUPABASE_URL
```

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Supabase CLI ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ secret ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `SUPABASE_` ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô reserved prefix

---

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‚úÖ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `SUPABASE_URL` ‡πÄ‡∏õ‡πá‡∏ô Secret

**‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:**
- Supabase Edge Functions ‡∏°‡∏µ `SUPABASE_URL` ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- Edge Function ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å environment variables ‡∏ó‡∏µ‡πà Supabase ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ

### ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Secrets ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

**‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Secrets 3 ‡∏ï‡∏±‡∏ß:**

1. **EASYSLIP_API_KEY**
2. **SERVICE_ROLE_KEY**
3. **PROJECT_URL** (‡πÅ‡∏ó‡∏ô SUPABASE_URL ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á reserved prefix)

---

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Secrets

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Supabase CLI (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```powershell
# ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
cd e:\Web_App\TR-ERP

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EASYSLIP_API_KEY
supabase secrets set EASYSLIP_API_KEY=your-easyslip-api-key-here

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SERVICE_ROLE_KEY
supabase secrets set SERVICE_ROLE_KEY=your-service-role-key-here

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PROJECT_URL (‡πÅ‡∏ó‡∏ô SUPABASE_URL ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á reserved prefix)
supabase secrets set PROJECT_URL=https://zkzjbhvsltbwbtteihiy.supabase.co
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `SUPABASE_URL` ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Supabase ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ Dashboard

1. **‡πÄ‡∏Ç‡πâ‡∏≤ Supabase Dashboard:**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://supabase.com/dashboard
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå `zkzjbhvsltbwbtteihiy`

2. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings ‚Üí Edge Functions ‚Üí Secrets:**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π **Settings** ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà **Edge Functions**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏ó‡πá‡∏ö **Secrets**

3. **‡πÄ‡∏û‡∏¥‡πà‡∏° Secrets:**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å **Add new secret**
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° Secrets ‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ï‡∏±‡∏ß:

   **a. EASYSLIP_API_KEY**
   - Name: `EASYSLIP_API_KEY`
   - Value: `<your-easyslip-api-key>`

   **b. SERVICE_ROLE_KEY**
   - Name: `SERVICE_ROLE_KEY`
   - Value: `<your-service-role-key>` (‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Settings ‚Üí API)

---

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤ SERVICE_ROLE_KEY

### ‡∏à‡∏≤‡∏Å Dashboard:

1. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings ‚Üí API:**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π **Settings** ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà **API**

2. **‡∏´‡∏≤ Service Role Key:**
   - ‡∏î‡∏π‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô "Project API keys"
   - ‡∏´‡∏≤ "service_role" key
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏° "Reveal" ‡∏´‡∏£‡∏∑‡∏≠ "Show" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡πà‡∏≤
   - ‚ö†Ô∏è **‡∏£‡∏∞‡∏ß‡∏±‡∏á: ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢ key ‡∏ô‡∏µ‡πâ**

### ‡∏à‡∏≤‡∏Å Email:

- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Email ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Supabase
- Email ‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏°‡∏µ API keys ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á service_role key

---

## ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Secrets

### ‡πÉ‡∏ä‡πâ CLI:

```powershell
# ‡∏î‡∏π secrets ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ
supabase secrets list
```

### ‡πÉ‡∏ä‡πâ Dashboard:

- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings ‚Üí Edge Functions ‚Üí Secrets
- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ secrets ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ

---

## Checklist

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Secrets:
- [ ] ‡∏´‡∏≤ SERVICE_ROLE_KEY (‡∏à‡∏≤‡∏Å Dashboard ‚Üí Settings ‚Üí API)
- [ ] ‡∏´‡∏≤ EASYSLIP_API_KEY (‡∏à‡∏≤‡∏Å EasySlip ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `EASYSLIP_API_KEY` (‡πÉ‡∏ä‡πâ CLI ‡∏´‡∏£‡∏∑‡∏≠ Dashboard)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `SERVICE_ROLE_KEY` (‡πÉ‡∏ä‡πâ CLI ‡∏´‡∏£‡∏∑‡∏≠ Dashboard)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `PROJECT_URL` (‡πÉ‡∏ä‡πâ CLI ‡∏´‡∏£‡∏∑‡∏≠ Dashboard) - ‡πÅ‡∏ó‡∏ô SUPABASE_URL ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á reserved prefix
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Secrets (`supabase secrets list`)

---

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

‚úÖ **‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß:**
- Edge Function `verify-slip` Deploy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
- ‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `SUPABASE_URL` ‡∏à‡∏≤‡∏Å environment variables ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

‚ö†Ô∏è **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:**
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `EASYSLIP_API_KEY`, `SERVICE_ROLE_KEY`, ‡πÅ‡∏•‡∏∞ `PROJECT_URL`
- ‡πÉ‡∏ä‡πâ `PROJECT_URL` ‡πÅ‡∏ó‡∏ô `SUPABASE_URL` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á reserved prefix

üìù **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ:**
1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `EASYSLIP_API_KEY` ‡πÅ‡∏•‡∏∞ `SERVICE_ROLE_KEY`
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Secrets
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Edge Function

---

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

### Q: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ `PROJECT_URL` ‡πÅ‡∏ó‡∏ô `SUPABASE_URL`?
**A:** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Supabase CLI ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ secret ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `SUPABASE_` (reserved prefix) ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ `PROJECT_URL` ‡πÅ‡∏ó‡∏ô ‡πÅ‡∏ï‡πà Edge Function ‡∏¢‡∏±‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `SUPABASE_URL` ‡∏à‡∏≤‡∏Å environment variables ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏õ‡πá‡∏ô fallback

### Q: ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ `SUPABASE_URL` ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤ default ‡∏•‡πà‡∏∞?
**A:** ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡πâ‡∏î Edge Function ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å request context ‡∏´‡∏£‡∏∑‡∏≠ hardcode ‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

### Q: ‡∏à‡∏∞‡∏£‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ß‡πà‡∏≤ Secrets ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á?
**A:** 
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ `supabase secrets list`
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Edge Function ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ
- ‡∏î‡∏π Logs ‡πÉ‡∏ô Dashboard
